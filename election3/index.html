<!DOCTYPE html>
<html lang="en">
<head>
	<title>Mapping with D3</title>
	<script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
	<script src="https://d3js.org/topojson.v2.min.js"></script>
	<script src="data/electionresults.json"></script>
	<style>
		body {
		    position: absolute;
		    font-family: "Proxima Nova", "Montserrat", sans-serif;
		}
		h1, h2 {
		    position: absolute;
		    left: 10px;
		    font-size: 1.3em;
		    font-weight: 100;
		}
		h2 {
		    top: 30px;
		    font-size: 1em;
		}
		/* REMOVE .incident FILL CSS */
		
    .hover {
		    fill: yellow;   
		}
		/* ADD CSS FOR #sliderContainer */
		#sliderContainer {
		    text-align: center;
		    position: relative;
		    top: 600px;
		}
</style>
</head>
<body>
     <h1>President Election Result</h1>
    <div id="sliderContainer">
    <input id="timeslider" type="range" min="2000" max="2016" value="2000" step="4"/><br>
    <span id="range">2000</span>
     
   

	<!-- Page elements and content go here. -->
	<script>
    console.log("starting up!")
		// Our D3 code will go here.
		var inputValue = null;
				// Width and Height of the whole visualization
		var width = 1000;
		var height = 780;
    // Create SVG
    var svg = d3.select( "body" )
      .append( "svg" )
      .attr( "width", width )
        .attr( "height", height );
    // Append empty placeholder g element to the SVG
    // g will contain geometry elements
    var g = svg.append( "g" );

		var projection = d3.geoAlbers()
        .scale(1200)
        .translate([width / 2, height / 2])
    var geoPath = d3.geoPath()
        .projection( projection );

// update the fill of each SVG of class "incident" with value
    function update(value) {
      console.log(value);
      document.getElementById("range").innerHTML=value;
      g.selectAll( "path" )
       .data( election_results_json.features )
       .enter()
       .append( "path" )
       .attr("fill", dateMatch)
       .attr( "stroke", "#999" )
       .attr( "d", geoPath );

}
  function dateMatch(data, value) {
   
    console.log(value);
    var e1= data.properties.elect2012;
    if (e1 == "R") {
        this.parentElement.appendChild(this);
        return "red";
    } else {
        return "blue";
    };
}
	function initialDate(d){
    var e = d.properties.elect2000;
    if (e == "R") {
        this.parentElement.appendChild(this);
        return "red";
    } else {
        return "blue";
    };
}
 g.selectAll( "path" )
       .data( election_results_json.features )
       .enter()
       .append( "path" )
       .attr("fill", initialDate)
       .attr( "stroke", "#999" )
       .attr( "d", geoPath );


       
       
      d3.select("#timeslider").on("input", function() {
         update(+this.value);
  
      });
	</script>	
</body>
</html>